/*! respimage - v0.9.1-pre - 2014-10-08
 Licensed MIT */
!function(a,b,c){"use strict";function d(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function e(){I=!1,t.vW=a.innerWidth||Math.max(z.offsetWidth||0,z.clientWidth||0),H=a.innerHeight||Math.max(z.offsetHeight||0,z.clientHeight||0)}function f(a){if(!(a in R)){var b={val:1,type:"x"},c=d(a||"");c&&(c.match(S)?(b.val=1*RegExp.$1,b.type=RegExp.$2):b=!1),R[a]=b}return R[a]}function g(a,b,c){return a/c>.2&&(a+=b*X,b>Z&&(a+=W)),a>c}function h(a){if(!a.getBoundingClientRect)return!0;var b,c,d=a.getBoundingClientRect();return d.top>=0&&(b=d.bottom)<=H&&d.left>=0&&(c=d.right)<=t.vW&&(b||c)}function i(a){var b,c=t.getSet(a),d=!1;"pending"!=c&&(d=!0,c&&(b=t.setRes(c),d=t.applySetCandidate(b,a))),a[t.ns].evaled=d}function j(a,b){return a.res-b.res}function k(a,b,c){var d;return!c&&b&&(c=a[t.ns].sets,c=c&&c[c.length-1]),d=l(b,c),d&&(b=t.makeUrl(b),a[t.ns].curSrc=b,a[t.ns].curCan=d,r||(a.currentSrc=b),d.res||o(d,d.set.sizes)),d}function l(a,b){var c,d,e;if(a&&b)for(e=t.parseSet(b),a=t.makeUrl(a),c=0;c<e.length;c++)if(a==t.makeUrl(e[c].url)){d=e[c];break}return d}function m(a){if(!a)return!1;var b=t.parseSet(a);return b[0]&&"w"==b[0].desc.type}function n(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[t.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function o(a,b){var c=a.desc;return"w"==c.type?(a.cWidth=t.calcListLength(b||"100vw"),a.res=c.val/a.cWidth):a.res=c.val,a}b.createElement("picture");var p,q,r,s,t={},u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={addSize:!1,xQuant:1,tLow:.2,tHigh:.5,tLazy:.1,greed:.3},C="data-risrc",D=C+"set";t.ns=("ri"+(new Date).getTime()).substr(0,9),r="currentSrc"in v,s=r?"currentSrc":"src",t.supSrcset="srcset"in v,t.supSizes="sizes"in v,t.selShort="picture > img, img[srcset]",t.sel=t.selShort,t.cfg=B,t.supSrcset&&(t.sel+=", img["+D+"]");var E=b.createElement("a");t.makeUrl=function(a){return E.href=a,E.href},t.qsa=function(a,b){return a.querySelectorAll(b)};var F=(a.console&&"function"==typeof console.warn?function(a){console.warn(a)}:u,function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}),G=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)};"https:"==location.protocol,t.matchesMedia=function(){return t.matchesMedia=a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?function(a){return!a||matchMedia(a).matches}:t.mMQ,t.matchesMedia.apply(this,arguments)},t.vW=0;var H,I=!0,J={minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/},K={};t.mMQ=function(a){var b,c,d=!1;return a?(K[a]||(b=a.match(J.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),c=a.match(J.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),b&&(b=parseFloat(b,10)*(b.indexOf("em")>0?t.getEmValue():1)),c&&(c=parseFloat(c,10)*(c.indexOf("em")>0?t.getEmValue():1)),K[a]={min:b,max:c}),b=K[a].min,c=K[a].max,(b&&t.vW>=b||c&&t.vW<=c)&&(d=!0),d):!0},t.DPR=a.devicePixelRatio||1;var L={},M=/^([\d\.]+)(em|vw|px)$/,N="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;";t.calcLength=function(a){var c,d,e=a,f=!1;if(!(e in L)){if(d=a.match(M))d[1]=parseFloat(d[1],10),f=d[1]?"vw"==d[2]?t.vW*d[1]/100:"em"==d[2]?t.getEmValue()*d[1]:d[1]:!1;else if(a.indexOf("calc")>-1||parseInt(a,10)){a=a.replace("vw","%"),q||(q=b.createElement("div"),q.style.cssText=N),p||(p=!0,z.insertBefore(q,z.firstChild)),q.style.width="0px";try{q.style.width=a}catch(g){c=!0}f=q.offsetWidth,c&&(f=!1)}0>=f&&(f=!1),L[e]=f}return L[e]},t.types=A,A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://wwwindow.w3.org/TR/SVG11/feature#Image","1.1"),t.supportsType=function(a){return a?A[a]:!0};var O=/(\([^)]+\))?\s*(.+)/,P={};t.parseSize=function(a){var b;return P[a]||(b=(a||"").match(O),P[a]={media:b&&b[1],length:b&&b[2]}),P[a]},t.parseSet=function(a){if(!a.cands){var b,c,d,e,g,h=a.srcset;for(a.cands=[];h;)h=h.replace(/^\s+/g,""),b=h.search(/\s/g),d=null,-1!=b?(c=h.slice(0,b),e=c.charAt(c.length-1),","!=e&&c||(c=c.replace(/,+$/,""),d=""),h=h.slice(b+1),null==d&&(g=h.indexOf(","),-1!=g?(d=h.slice(0,g),h=h.slice(g+1)):(d=h,h=""))):(c=h,h=""),c&&(d=f(d))&&a.cands.push({url:c.replace(/^,+/,""),desc:d,set:a})}return a.cands};var Q,R={},S=/^([\+eE\d\.]+)(w|x)$/,T="font-size:100% !important;";t.getEmValue=function(){var a;if(!Q&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=N,z.style.cssText=T,a.style.cssText=T,a.appendChild(c),Q=c.offsetWidth,a.removeChild(c),Q=parseFloat(Q,10),z.style.cssText=d,a.style.cssText=e}return Q||16};var U={};t.calcListLength=function(a){if(!(a in U)||B.noCache){var b,c,e,f,g,h,i=d(a).split(/\s*,\s*/),j=!1;for(g=0,h=i.length;h>g&&(b=i[g],c=t.parseSize(b),e=c.length,f=c.media,!e||!t.matchesMedia(f)||(j=t.calcLength(e))===!1);g++);U[a]=j?j:t.vW}return U[a]},t.setRes=function(a){var b,c;if(a){b=t.parseSet(a);for(var d=0,e=b.length;e>d;d++)c=b[d],c.descriptor||o(c,a.sizes)}return b};var V,W,X,Y,Z,$;t.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,i,l,m,n,o,p,q=b[t.ns],u=t.DPR*B.xQuant,v=!0;if(m=q.curSrc||b[s],n=q.curCan||k(b,m,a[0].set),m&&(n&&(n.res+=Y),b.complete||q.src!=w.call(b,"src")||(o=!q.pic||n&&n.set==a[0].set,(o||!$&&!h(b))&&(l=n,p=m,v="lazy",$&&bb(b)))),!l)for(a.sort(j),i=a.length,l=a[i-1],d=0;i>d;d++)if(c=a[d],c.res>=u){e=d-1,l=a[e]&&(f=c.res-u)&&m!=t.makeUrl(c.url)&&g(a[e].res,f,u)?a[e]:c;break}return l&&(p=t.makeUrl(l.url),r||(b.currentSrc=p),q.curSrc=p,q.curCan=l,p!=m?t.setSrc(b,l):t.setSize(b)),v}},t.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"==b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))};var _=function(){G(this,"load",_),t.setSize(this)};t.setSize=function(a){var b,c=a[t.ns].curCan;B.addSize&&c&&!a[t.ns].dims&&(a.complete||(G(a,"load",_),F(a,"load",_)),b=a.naturalWidth,b&&("x"==c.desc.type?x.call(a,"width",parseInt(b/c.res/B.xQuant,10)):"w"==c.desc.type&&x.call(a,"width",parseInt(c.cWidth*(b/c.desc.val),10))))},b.addEventListener&&"naturalWidth"in v&&"complete"in v||(t.setSize=u),t.getSet=function(a){var b,c,d,e=!1,f=a[t.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&t.matchesMedia(c.media)&&(d=t.supportsType(c.type))){"pending"==d&&(c=d),e=c;break}return e};var ab=t.supSrcset&&!t.supSizes;t.parseSets=function(a,b){var d,e,f,g,h="PICTURE"==b.nodeName.toUpperCase(),i=a[t.ns];return i.src===c&&(i.src=w.call(a,"src"),i.src?x.call(a,C,i.src):y.call(a,C)),i.src&&(B.useGD&&null==a.getAttribute("data-ri")||null!=a.getAttribute("data-no-ri"))?(i.supported=!0,void(i.parsed=!0)):(i.srcset===c&&(d=w.call(a,"srcset"),i.srcset=d,g=!0),i.dims===c&&(i.dims=w.call(a,"height")&&w.call(a,"width")),i.sets=[],h&&(i.pic=!0,n(b,i.sets)),i.srcset?(e={srcset:i.srcset,sizes:w.call(a,"sizes")},i.sets.push(e),f=ab||i.src?m(e):!1,f||!i.src||l(i.src,e)||(e.srcset+=", "+i.src,e.cands=!1)):i.src&&i.sets.push({srcset:i.src,sizes:null}),i.supported=!(h||e&&!t.supSrcset||f),g&&t.supSrcset&&h&&!f&&(d?(x.call(a,D,d),a.srcset=""):y.call(a,D)),void(i.parsed=!0))};var bb=function(){var a=function(){G(this,"load",a),t.fillImgs({elements:[this]})};return function(b){G(b,"load",a),F(b,"load",a)}}();t.fillImg=function(a,b){var c,d,e=b.reparse||b.reevaluate;if(a[t.ns]||(a[t.ns]={}),d=a[t.ns],"lazy"==d.evaled&&($||a.complete)&&(d.evaled=!1),e||!d.evaled){if(!d.parsed||b.reparse){if(c=a.parentNode,!c)return;t.parseSets(a,c,b)}d.supported?d.evaled=!0:i(a)}};var cb;t.setupRun=function(a){(!db||a.reevaluate)&&(V=Math.min(Math.max(t.DPR*B.xQuant,1),1.8),W=B.tLow*V,Y=B.tLazy*V,X=B.greed*V,Z=B.tHigh*V),I&&(L={},U={},e(),a.elements||a.context||clearTimeout(cb))},t.teardownRun=function(){var a;p&&(p=!1,a=q.parentNode,a&&a.removeChild(q))};var db=!1,eb=function(a){var c,d,e,f=a||{};if(f.elements&&1==f.elements.nodeType&&("IMG"==f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||t.qsa(f.context||b,f.reevaluate||f.reparse?t.sel:t.selShort),e=c.length){for(t.setupRun(f),db=!0,d=0;e>d;d++)t.fillImg(c[d],f);t.teardownRun(f)}};t.fillImgs=eb,a.HTMLPictureElement?(eb=u,t.fillImg=u):!function(){var c=/^loade|^c/,d=function(){clearTimeout(g),g=setTimeout(d,3e3),b.body&&(c.test(b.readyState||"")&&($=!0,clearTimeout(g),G(b,"readystatechange",d)),t.fillImgs())},e=function(){t.fillImgs({reevaluate:!0})},f=function(){clearTimeout(cb),I=!0,cb=setTimeout(e,99)},g=setTimeout(d,b.body?9:99);F(a,"resize",f),F(b,"readystatechange",d)}(),eb._=t,eb.config=function(a,b,c){if("addType"==a){if(A[b]=c,"pending"==c)return}else B[a]=b;db&&t.fillImgs({reevaluate:!0})},a.respimage=eb,"object"==typeof module&&"object"==typeof module.exports?module.exports=eb:"function"==typeof define&&define.amd&&define(function(){return eb})}(window,document);